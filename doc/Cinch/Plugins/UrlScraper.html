<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Class: Cinch::Plugins::UrlScraper

        &mdash; Documentation by YARD 0.9.20

    </title>

    <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8"/>

    <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8"/>

    <script type="text/javascript" charset="utf-8">
        pathId = "Cinch::Plugins::UrlScraper";
        relpath = '../../';
    </script>


    <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

    <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


</head>
<body>
<div class="nav_wrap">
    <iframe id="nav" src="../../class_list.html?1"></iframe>
    <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
    <div id="header">
        <div id="menu">

            <a href="../../_index.html">Index (U)</a> &raquo;
            <span class='title'><span class='object_link'><a href="../../Cinch.html"
                                                             title="Cinch (module)">Cinch</a></span></span> &raquo;
            <span class='title'><span class='object_link'><a href="../Plugins.html" title="Cinch::Plugins (module)">Plugins</a></span></span>
            &raquo;
            <span class="title">UrlScraper</span>

        </div>

        <div id="search">

            <a class="full_list_link" id="class_list_link"
               href="../../class_list.html">

                <svg width="24" height="24">
                    <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
                    <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
                    <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
                </svg>
            </a>

        </div>
        <div class="clear"></div>
    </div>

    <div id="content"><h1>Class: Cinch::Plugins::UrlScraper


    </h1>
        <div class="box_info">

            <dl>
                <dt>Inherits:</dt>
                <dd>
                    <span class="inheritName">Object</span>

                    <ul class="fullTree">
                        <li>Object</li>

                        <li class="next">Cinch::Plugins::UrlScraper</li>

                    </ul>
                    <a href="#" class="inheritanceTree">show all</a>

                </dd>
            </dl>


            <dl>
                <dt>Includes:</dt>
                <dd><span class='object_link'><a href="../Helpers.html"
                                                 title="Cinch::Helpers (module)">Helpers</a></span>, Cinch::Plugin
                </dd>
            </dl>


            <dl>
                <dt>Defined in:</dt>
                <dd>lib/plugins/url_scraper.rb</dd>
            </dl>

        </div>


        <h2>
            Instance Method Summary
            <small><a href="#" class="summary_toggle">collapse</a></small>
        </h2>

        <ul class="summary">

            <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">#<strong>execute</strong>(m, option)  &#x21d2; Object </a>
    

    
  </span>


                <span class="summary_desc"><div class='inline'></div></span>

            </li>


            <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(*args)  &#x21d2; UrlScraper </a>
    

    
  </span>


                <span class="note title constructor">constructor</span>


                <span class="summary_desc"><div class='inline'>
<p>A new instance of UrlScraper.</p>
</div></span>

            </li>


            <li class="public ">
  <span class="summary_signature">
    
      <a href="#listen-instance_method" title="#listen (instance method)">#<strong>listen</strong>(m)  &#x21d2; Object </a>
    

    
  </span>


                <span class="summary_desc"><div class='inline'></div></span>

            </li>


            <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload-instance_method" title="#reload (instance method)">#<strong>reload</strong>  &#x21d2; Object </a>
    

    
  </span>


                <span class="summary_desc"><div class='inline'></div></span>

            </li>


        </ul>


        <h3 class="inherited">Methods included from <span class='object_link'><a href="../Helpers.html"
                                                                                 title="Cinch::Helpers (module)">Helpers</a></span>
        </h3>
        <p class="inherited"><span class='object_link'><a href="../Helpers.html#c_top_news-instance_method"
                                                          title="Cinch::Helpers#c_top_news (method)">#c_top_news</a></span>,
            <span class='object_link'><a href="../Helpers.html#categories-instance_method"
                                         title="Cinch::Helpers#categories (method)">#categories</a></span>, <span
                    class='object_link'><a href="../Helpers.html#check_auth-instance_method"
                                           title="Cinch::Helpers#check_auth (method)">#check_auth</a></span>, <span
                    class='object_link'><a href="../Helpers.html#check_bff-instance_method"
                                           title="Cinch::Helpers#check_bff (method)">#check_bff</a></span>, <span
                    class='object_link'><a href="../Helpers.html#check_foe-instance_method"
                                           title="Cinch::Helpers#check_foe (method)">#check_foe</a></span>, <span
                    class='object_link'><a href="../Helpers.html#check_friend-instance_method"
                                           title="Cinch::Helpers#check_friend (method)">#check_friend</a></span>, <span
                    class='object_link'><a href="../Helpers.html#check_ignore-instance_method"
                                           title="Cinch::Helpers#check_ignore (method)">#check_ignore</a></span>, <span
                    class='object_link'><a href="../Helpers.html#check_master-instance_method"
                                           title="Cinch::Helpers#check_master (method)">#check_master</a></span>, <span
                    class='object_link'><a href="../Helpers.html#execute_c_search-instance_method"
                                           title="Cinch::Helpers#execute_c_search (method)">#execute_c_search</a></span>,
            <span class='object_link'><a href="../Helpers.html#execute_sc_search-instance_method"
                                         title="Cinch::Helpers#execute_sc_search (method)">#execute_sc_search</a></span>,
            <span class='object_link'><a href="../Helpers.html#fetch_news-instance_method"
                                         title="Cinch::Helpers#fetch_news (method)">#fetch_news</a></span>, <span
                    class='object_link'><a href="../Helpers.html#geolookup-instance_method"
                                           title="Cinch::Helpers#geolookup (method)">#geolookup</a></span>, <span
                    class='object_link'><a href="../Helpers.html#ratelimit-instance_method"
                                           title="Cinch::Helpers#ratelimit (method)">#ratelimit</a></span>, <span
                    class='object_link'><a href="../Helpers.html#sc_top_news-instance_method"
                                           title="Cinch::Helpers#sc_top_news (method)">#sc_top_news</a></span>, <span
                    class='object_link'><a href="../Helpers.html#sub_categories-instance_method"
                                           title="Cinch::Helpers#sub_categories (method)">#sub_categories</a></span></p>

        <div id="constructor_details" class="method_details_list">
            <h2>Constructor Details</h2>

            <div class="method_details first">
                <h3 class="signature first" id="initialize-instance_method">

                    #<strong>initialize</strong>(*args) &#x21d2; <tt><span class='object_link'><a href=""
                                                                                                  title="Cinch::Plugins::UrlScraper (class)">UrlScraper</a></span></tt>


                </h3>
                <div class="docstring">
                    <div class="discussion">

                        <p>Returns a new instance of UrlScraper</p>


                    </div>
                </div>
                <div class="tags">


                </div>
                <table class="source_code">
                    <tr>
                        <td>
      <pre class="lines">


20
21
22
23
24
25
26
27</pre>
                        </td>
                        <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/url_scraper.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span
                  class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>super</span>
  <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span
                  class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&#39;</span><span
                  class='tstring_content'>docs/userinfo.yaml</span><span class='tstring_end'>&#39;</span></span><span
                  class='rparen'>)</span>
    <span class='ivar'>@storage</span> <span class='op'>=</span> <span class='const'>YAML</span><span
                  class='period'>.</span><span class='id identifier rubyid_load_file'>load_file</span><span
                  class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span
                  class='tstring_content'>docs/userinfo.yaml</span><span class='tstring_end'>&#39;</span></span><span
                  class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='ivar'>@storage</span> <span class='op'>=</span> <span class='lbrace'>{</span><span
                  class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
                        </td>
                    </tr>
                </table>
            </div>

        </div>


        <div id="instance_method_details" class="method_details_list">
            <h2>Instance Method Details</h2>


            <div class="method_details first">
                <h3 class="signature first" id="execute-instance_method">

                    #<strong>execute</strong>(m, option) &#x21d2; <tt>Object</tt>


                </h3>
                <table class="source_code">
                    <tr>
                        <td>
      <pre class="lines">


150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172</pre>
                        </td>
                        <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/url_scraper.rb', line 150</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_m'>m</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_option'>option</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span
                  class='id identifier rubyid_check_ignore'>check_ignore</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reload'>reload</span>
  <span class='kw'>begin</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_check_master'>check_master</span><span
                  class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>

    <span class='ivar'>@url</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_option'>option</span> <span class='op'>==</span> <span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on</span><span
                  class='tstring_end'>&quot;</span></span>

    <span class='kw'>case</span> <span class='id identifier rubyid_option'>option</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>on</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:enabled_channels</span><span
                  class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span
                  class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span
                  class='id identifier rubyid_name'>name</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:enabled_channels</span><span
                  class='rbracket'>]</span><span class='period'>.</span><span
                  class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span
                  class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_reply'>reply</span> <span
                  class='const'>Format</span><span class='lparen'>(</span><span class='symbol'>:green</span><span
                  class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>URL Scraping for </span><span class='embexpr_beg'>#{</span><span
                  class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_channel'>channel</span><span class='embexpr_end'>}</span><span
                  class='tstring_content'> is now </span><span class='embexpr_beg'>#{</span><span
                  class='ivar'>@url</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span
                  class='tstring_content'>enabled</span><span class='tstring_end'>&#39;</span></span> <span
                  class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span
                  class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span><span
                  class='embexpr_end'>}</span><span class='tstring_content'>!</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='ivar'>@bot</span><span class='period'>.</span><span
                  class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span
                  class='kw'>self</span><span class='period'>.</span><span
                  class='id identifier rubyid_class'>class</span><span class='period'>.</span><span
                  class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span
                  class='tstring_content'> → </span><span class='embexpr_beg'>#{</span><span
                  class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:enabled_channels</span><span
                  class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span
                  class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span><span class='semicolon'>;</span>

  <span class='kw'>rescue</span>
    <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_reply'>reply</span> <span
                  class='const'>Format</span><span class='lparen'>(</span><span class='symbol'>:red</span><span
                  class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>Error: </span><span class='embexpr_beg'>#{</span><span
                  class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="method_details ">
                <h3 class="signature " id="listen-instance_method">

                    #<strong>listen</strong>(m) &#x21d2; <tt>Object</tt>


                </h3>
                <table class="source_code">
                    <tr>
                        <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre>
                        </td>
                        <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/url_scraper.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_listen'>listen</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_m'>m</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span
                  class='id identifier rubyid_check_ignore'>check_ignore</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_m'>m</span><span
                  class='period'>.</span><span class='id identifier rubyid_message'>message</span><span
                  class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>nospoil</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span
                  class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:enabled_channels</span><span
                  class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span
                  class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span
                  class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='comment'># Create mechanize agent
</span>  <span class='kw'>if</span> <span class='ivar'>@agent</span><span class='period'>.</span><span
                  class='id identifier rubyid_nil?'>nil?</span>
    <span class='ivar'>@agent</span> <span class='op'>=</span> <span class='const'>Mechanize</span><span class='period'>.</span><span
                  class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@agent</span><span class='period'>.</span><span class='id identifier rubyid_user_agent_alias'>user_agent_alias</span> <span
                  class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>Linux Mozilla</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@agent</span><span class='period'>.</span><span class='id identifier rubyid_max_history'>max_history</span>      <span
                  class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>end</span>

  <span class='const'>URI</span><span class='period'>.</span><span
                  class='id identifier rubyid_extract'>extract</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_message'>message</span><span class='period'>.</span><span
                  class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span
                  class='regexp_beg'>/</span><span class='tstring_content'>git@(gist.github.com):</span><span
                  class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span
                  class='tstring_beg'>&#39;</span><span class='tstring_content'>git://\1/</span><span
                  class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span
                  class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>http</span><span class='tstring_end'>&quot;</span></span><span
                  class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>https</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>git</span><span
                  class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span
                  class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span
                  class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_link'>link</span><span
                  class='op'>|</span>
    <span class='id identifier rubyid_link'>link</span><span class='op'>=~</span><span class='tstring'><span
                  class='regexp_beg'>/</span><span class='tstring_content'>^(.*?)[:;,\)]?$</span><span
                  class='regexp_end'>/</span></span>
    <span class='backref'>$1</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span
                  class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_link'>link</span><span
                  class='op'>|</span>
    <span class='comment'># Fetch data
</span>    <span class='kw'>begin</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_git'>git</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_link'>link</span> <span class='op'>=~</span> <span class='tstring'><span
                  class='regexp_beg'>/</span><span
                  class='tstring_content'>^git:\/\/(gist.github.com\/.*)\.git$</span><span
                  class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>https://</span><span
                  class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span
                  class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_uri'>uri</span>  <span class='op'>=</span> <span class='const'>URI</span><span
                  class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span
                  class='lparen'>(</span><span class='id identifier rubyid_link'>link</span><span
                  class='rparen'>)</span>
      <span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span
                  class='ivar'>@agent</span><span class='period'>.</span><span
                  class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_link'>link</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>Mechanize</span><span class='op'>::</span><span class='const'>ResponseCodeError</span>
      <span class='kw'>if</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>www.youtube.com</span><span class='tstring_end'>&quot;</span></span> <span
                  class='op'>==</span> <span class='id identifier rubyid_uri'>uri</span><span
                  class='period'>.</span><span class='id identifier rubyid_host'>host</span>
        <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>Thank you, GEMA!</span><span
                  class='tstring_end'>&quot;</span></span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>Y U POST BROKEN LINKS?</span><span
                  class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>true</span>
      <span class='kw'>end</span>

      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'># Replace strange characters
</span>    <span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_page'>page</span><span class='period'>.</span><span
                  class='id identifier rubyid_title'>title</span><span class='period'>.</span><span
                  class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span
                  class='regexp_beg'>/</span><span class='tstring_content'>[\x00-\x1f]*</span><span
                  class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span><span class='period'>.</span><span
                  class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span
                  class='regexp_beg'>/</span><span class='tstring_content'>[ ]{2,}</span><span
                  class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span><span class='period'>.</span><span
                  class='id identifier rubyid_strip'>strip</span> <span class='kw'>rescue</span> <span
                  class='kw'>nil</span>

    <span class='comment'># Check host
</span>    <span class='kw'>case</span> <span class='id identifier rubyid_uri'>uri</span><span
                  class='period'>.</span><span class='id identifier rubyid_host'>host</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>www.imdb.com</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># Logo
</span>      <span class='id identifier rubyid_imdb_logo'>imdb_logo</span> <span class='op'>=</span> <span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>1,8IMDb</span><span class='tstring_end'>&quot;</span></span>

      <span class='comment'># Get user rating
</span>      <span class='id identifier rubyid_rating'>rating</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_page'>page</span><span class='period'>.</span><span
                  class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//strong/span[@itemprop=&#39;ratingValue&#39;]</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span
                  class='period'>.</span><span class='id identifier rubyid_text'>text</span>

      <span class='comment'># Get votes
</span>      <span class='id identifier rubyid_votes'>votes</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_page'>page</span><span class='period'>.</span><span
                  class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//a/span[@itemprop=&#39;ratingCount&#39;]</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span
                  class='period'>.</span><span class='id identifier rubyid_text'>text</span>

      <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span
                  class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_user'>user</span><span class='period'>.</span><span
                  class='id identifier rubyid_nick'>nick</span><span class='embexpr_end'>}</span><span
                  class='tstring_content'>&#39;s %s Title: %s (Rating: %s/10 from %s users)</span><span
                  class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span>
        <span class='id identifier rubyid_imdb_logo'>imdb_logo</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_rating'>rating</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_votes'>votes</span>
      <span class='rbracket'>]</span>

    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>www.youtube.com</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># Youtube logo
</span>      <span class='id identifier rubyid_yt_logo'>yt_logo</span> <span class='op'>=</span> <span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0,4You1,0Tube</span><span
                  class='tstring_end'>&quot;</span></span>
      <span class='comment'># Reload with nofeather
</span>      <span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span
                  class='ivar'>@agent</span><span class='period'>.</span><span
                  class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_link'>link</span> <span class='op'>+</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;nofeather=True</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='comment'># Get page hits
</span>      <span class='id identifier rubyid_hits'>hits</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_page'>page</span><span class='period'>.</span><span
                  class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//div[@class=&#39;watch-view-count&#39;]</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_hits'>hits</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_hits'>hits</span><span class='period'>.</span><span
                  class='id identifier rubyid_text'>text</span><span class='period'>.</span><span
                  class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span
                  class='regexp_beg'>/</span><span class='tstring_content'>[.,]</span><span class='regexp_end'>/</span></span><span
                  class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span>
      <span class='comment'># Get likes
</span>      <span class='id identifier rubyid_likes'>likes</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_page'>page</span><span class='period'>.</span><span
                  class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//span[@class=&#39;likes-count&#39;]</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_likes'>likes</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_likes'>likes</span><span class='period'>.</span><span
                  class='id identifier rubyid_text'>text</span><span class='period'>.</span><span
                  class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span
                  class='regexp_beg'>/</span><span class='tstring_content'>[.,]</span><span class='regexp_end'>/</span></span><span
                  class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span>
      <span class='comment'># Get dislikes
</span>      <span class='id identifier rubyid_dislikes'>dislikes</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_page'>page</span><span class='period'>.</span><span
                  class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//span[@class=&#39;dislikes-count&#39;]</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_dislikes'>dislikes</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_dislikes'>dislikes</span><span class='period'>.</span><span
                  class='id identifier rubyid_text'>text</span><span class='period'>.</span><span
                  class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span
                  class='regexp_beg'>/</span><span class='tstring_content'>[.,]</span><span class='regexp_end'>/</span></span><span
                  class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span>
      <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span
                  class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_user'>user</span><span class='period'>.</span><span
                  class='id identifier rubyid_nick'>nick</span><span class='embexpr_end'>}</span><span
                  class='tstring_content'>&#39;s %s Title: %s (Views: %s [ Likes: %s || Dislikes: %s ])</span><span
                  class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span>
        <span class='id identifier rubyid_yt_logo'>yt_logo</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_hits'>hits</span><span class='period'>.</span><span
                  class='id identifier rubyid_strip'>strip</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_likes'>likes</span><span class='period'>.</span><span
                  class='id identifier rubyid_strip'>strip</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_dislikes'>dislikes</span><span class='period'>.</span><span
                  class='id identifier rubyid_strip'>strip</span>
      <span class='rbracket'>]</span>


    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>gist.github.com</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># Get owner
</span>      <span class='id identifier rubyid_owner'>owner</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_page'>page</span><span class='period'>.</span><span
                  class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//div[@class=&#39;name&#39;]/a</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span
                  class='period'>.</span><span class='id identifier rubyid_inner_html'>inner_html</span>

      <span class='comment'># Get time
</span>      <span class='id identifier rubyid_age'>age</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_page'>page</span><span class='period'>.</span><span
                  class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//span[@class=&#39;date&#39;]/time</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_age'>age</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_age'>age</span><span class='period'>.</span><span
                  class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='symbol'>:datetime</span><span
                  class='rbracket'>]</span> <span class='kw'>rescue</span> <span
                  class='id identifier rubyid_age'>age</span><span class='period'>.</span><span
                  class='id identifier rubyid_text'>text</span> <span class='kw'>if</span> <span
                  class='id identifier rubyid_age'>age</span>
      <span class='id identifier rubyid_age'>age</span> <span class='op'>=</span> <span class='const'>Time</span><span
                  class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span
                  class='lparen'>(</span><span class='id identifier rubyid_age'>age</span><span class='rparen'>)</span> <span
                  class='kw'>rescue</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_age'>age</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_age'>age</span><span class='period'>.</span><span
                  class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>%Y-%m-%d %H:%M</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_age'>age</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_git'>git</span>
        <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>Title: %s (at %s, %s on %s), Url: %s</span><span
                  class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span>
          <span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span
                  class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_owner'>owner</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_age'>age</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_link'>link</span>
        <span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>Title: %s (at %s, %s on %s)</span><span
                  class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span>
          <span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span
                  class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_owner'>owner</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_age'>age</span>
        <span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>pastie.org</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># Get time
</span>      <span class='id identifier rubyid_age'>age</span> <span class='op'>=</span> <span class='const'>Time</span><span
                  class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span
                  class='lparen'>(</span><span class='id identifier rubyid_page'>page</span><span
                  class='period'>.</span><span class='id identifier rubyid_search'>search</span><span
                  class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>//span[@class=&#39;typo_date&#39;]</span><span
                  class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span
                  class='period'>.</span><span class='id identifier rubyid_text'>text</span><span
                  class='rparen'>)</span>
      <span class='id identifier rubyid_age'>age</span> <span class='op'>=</span> <span
                  class='id identifier rubyid_age'>age</span><span class='period'>.</span><span
                  class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>%Y-%m-%d %H:%M</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span>

      <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>Title: %s (at %s, on %s)</span><span
                  class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span>
        <span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span
                  class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_age'>age</span>
      <span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>subforge.org</span><span class='tstring_end'>&quot;</span></span><span
                  class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>subtle.de</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>Title: %s (at %s)</span><span
                  class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span
                  class='lbracket'>[</span> <span class='id identifier rubyid_title'>title</span><span
                  class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span
                  class='period'>.</span><span class='id identifier rubyid_host'>host</span> <span
                  class='rbracket'>]</span>

    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>twitter.com</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># twitter logo
</span>      <span class='id identifier rubyid_t_logo'>t_logo</span> <span class='op'>=</span> <span
                  class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>0,10twitter</span><span class='tstring_end'>&quot;</span></span>

      <span class='kw'>if</span> <span class='id identifier rubyid_link'>link</span> <span class='op'>=~</span> <span
                  class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/status\/(\d+)$</span><span
                  class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_json'>json</span>      <span class='op'>=</span> <span
                  class='ivar'>@agent</span><span class='period'>.</span><span
                  class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>https://api.twitter.com/1/statuses/show/</span><span
                  class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span
                  class='tstring_content'>.json?trim_user=1</span><span class='tstring_end'>&quot;</span></span><span
                  class='rparen'>)</span><span class='period'>.</span><span
                  class='id identifier rubyid_body'>body</span>
        <span class='id identifier rubyid_tweet'>tweet</span>     <span class='op'>=</span> <span
                  class='const'>JSON</span><span class='period'>.</span><span
                  class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span
                  class='id identifier rubyid_json'>json</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_unescaped'>unescaped</span> <span class='op'>=</span> <span
                  class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_unescapeHTML'>unescapeHTML</span><span
                  class='lparen'>(</span><span class='id identifier rubyid_tweet'>tweet</span><span
                  class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>text</span><span class='tstring_end'>&quot;</span></span><span
                  class='rbracket'>]</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>%s @%s: %s</span><span
                  class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span
                  class='lbracket'>[</span><span class='id identifier rubyid_t_logo'>t_logo</span><span
                  class='comma'>,</span> <span class='id identifier rubyid_tweet'>tweet</span><span
                  class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>user</span><span class='tstring_end'>&quot;</span></span><span
                  class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>screen_name</span><span
                  class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span
                  class='comma'>,</span> <span class='id identifier rubyid_unescaped'>unescaped</span> <span
                  class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span
                  class='tstring_content'>Broken twitter link: %s (at %s)</span><span class='tstring_end'>&quot;</span></span> <span
                  class='op'>%</span> <span class='lbracket'>[</span> <span
                  class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span
                  class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span
                  class='id identifier rubyid_host'>host</span> <span class='rbracket'>]</span> <span
                  class='kw'>if</span> <span class='id identifier rubyid_title'>title</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span
                  class='id identifier rubyid_reply'>reply</span> <span class='tstring'><span
                  class='tstring_beg'>&quot;</span><span class='tstring_content'>Title: %s (at %s)</span><span
                  class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span
                  class='lbracket'>[</span> <span class='id identifier rubyid_title'>title</span><span
                  class='comma'>,</span> <span class='id identifier rubyid_uri'>uri</span><span
                  class='period'>.</span><span class='id identifier rubyid_host'>host</span> <span
                  class='rbracket'>]</span> <span class='kw'>if</span> <span
                  class='id identifier rubyid_title'>title</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="method_details ">
                <h3 class="signature " id="reload-instance_method">

                    #<strong>reload</strong> &#x21d2; <tt>Object</tt>


                </h3>
                <table class="source_code">
                    <tr>
                        <td>
      <pre class="lines">


174
175
176
177
178
179
180</pre>
                        </td>
                        <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/url_scraper.rb', line 174</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reload'>reload</span>
  <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span
                  class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span
                  class='tstring'><span class='tstring_beg'>&#39;</span><span
                  class='tstring_content'>docs/userinfo.yaml</span><span class='tstring_end'>&#39;</span></span><span
                  class='rparen'>)</span>
    <span class='ivar'>@storage</span> <span class='op'>=</span> <span class='const'>YAML</span><span
                  class='period'>.</span><span class='id identifier rubyid_load_file'>load_file</span><span
                  class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span
                  class='tstring_content'>docs/userinfo.yaml</span><span class='tstring_end'>&#39;</span></span><span
                  class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='ivar'>@storage</span> <span class='op'>=</span> <span class='lbrace'>{</span><span
                  class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
                        </td>
                    </tr>
                </table>
            </div>

        </div>

    </div>

    <div id="footer">
        Generated on Sun Aug 25 00:26:30 2019 by
        <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
        0.9.20 (ruby-2.5.5).
    </div>

</div>
</body>
</html>